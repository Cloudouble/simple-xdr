<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Demo Page for SimpleXDR Library</title>
    <meta name="description" content="Demo Page for XDR parsing and serialization :: SimpleXDR Library">
    <link rel="stylesheet" href="style.css">

    <link rel="modulepreload" href="../xdr.js">
    <script type="module">
        import XDR, { X } from "../xdr.js"

        const xCode = `const MAXUSERNAME = 32;     /* max length of a user name */
         const MAXFILELEN = 65535;   /* max length of a file      */
         const MAXNAMELEN = 255;     /* max length of a file name */

         /*
          * Types of files:
          */
         enum filekind {
            TEXT = 0,       /* ascii data */
            DATA = 1,       /* raw data   */
            EXEC = 2        /* executable */
         };

         typedef enum {    /* using typedef */
            FALSE = 0,
            TRUE = 1
         } boolA;

         /*
          * File information, per kind of file:
          */
         union filetype switch (filekind kind) {
         case TEXT:
            void;                           /* no extra information */
         case DATA:
            string creator<MAXNAMELEN>;     /* data creator         */
         case EXEC:
            string interpretor<MAXNAMELEN>; /* program interpretor  */
         };

         typedef union switch (filekind kind) {
         case TEXT:
            void;                           /* no extra information */
         case DATA:
            string creator<MAXNAMELEN>;     /* data creator         */
         case EXEC:
            string interpretor<MAXNAMELEN>; /* program interpretor  */
         } filetypeA;


         typedef egg eggbox[12];
         typedef unsigned int uint32;

         /*
          * A complete file:
          */
         struct file {
            string filename<MAXNAMELEN>; /* name of file    */
            filetype type;               /* info about file */
            string owner<MAXUSERNAME>;   /* owner of file   */
            opaque *data<MAXFILELEN>;     /* file data       */
         };

         typedef struct {
            string filename<MAXNAMELEN>; /* name of file    */
            filetype type;               /* info about file */
            string owner<MAXUSERNAME>;   /* owner of file   */
            opaque *data<MAXFILELEN>;     /* file data       */
         } fileA;


`
        // also needs to support the following formats:
        // 
        // case ABC: struct {} identifier; 
        // case ABC: case DEF: void; (multiple cases to one result)
        // case ABC: union switch (d) {case: DEF: ...} (nested unions within cases)



        console.log('line 53', XDR)

        const customType = X(xCode)

        console.log('line 57', customType)

        window.xdr = XDR
        window.x = X

    </script>

</head>

<body>
    <header>
        <h1>SimpleXDR Demo Page</h1>
        <p>Using the <a href="https://github.com/cloudouble/simple-xdr">SimpleXDR</a> library</p>
    </header>
    <main>






    </main>
    <footer>
        <p>Created as the deliverable for Milestone Two of the <a
                href="https://github.com/Cloudouble/stellar-js-worker-sdk">Stellar JavaScript Worker SDK</a></p>
    </footer>

</body>

</html>