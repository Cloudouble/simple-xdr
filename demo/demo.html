<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Demo Page for SimpleXDR Library</title>
    <meta name="description" content="Demo Page for XDR parsing and serialization :: SimpleXDR Library">
    <link rel="stylesheet" href="style.css">

    <link rel="modulepreload" href="../xdr.js">
    <script type="module">
        import XDR, { X } from "../xdr.js"

        const xCode = `const MAXUSERNAME = 32;     /* max length of a user name */
         const MAXFILELEN = 65535;   /* max length of a file      */
         const MAXNAMELEN = 255;     /* max length of a file name */

         /*
          * Types of files:
          */
         enum filekind {
            TEXT = 0,       /* ascii data */
            DATA = 1,       /* raw data   */
            EXEC = 2        // executable
         };

         /*
          * File information, per kind of file:
          */
         union filetype switch (filekind kind) {
         case TEXT:
            void;                           /* no extra information */
         case DATA:
            string creator<MAXNAMELEN>;     /* data creator         */
         case EXEC:
            string interpretor<MAXNAMELEN>; /* program interpretor  */
         };

         /*
          * A complete file:
          */
         struct file {
            string filename<MAXNAMELEN>; /* name of file    */
            filetype type;               /* info about file */
            string owner<MAXUSERNAME>;   /* owner of file   */
            opaque data<MAXFILELEN>;     /* file data       */
         };
`

        const testBytes = new Uint8Array([
            0x00, 0x00, 0x00, 0x09,
            0x73, 0x69, 0x6c, 0x6c,
            0x79, 0x70, 0x72, 0x6f,
            0x67, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x02,
            0x00, 0x00, 0x00, 0x04,
            0x6c, 0x69, 0x73, 0x70,
            0x00, 0x00, 0x00, 0x04,
            0x6a, 0x6f, 0x68, 0x6e,
            0x00, 0x00, 0x00, 0x06,
            0x28, 0x71, 0x75, 0x69,
            0x74, 0x29, 0x00, 0x00
        ])

        const testValue = {
            filename: "sillyprog",
            type: {
                kind: "EXEC",
                interpretor: "lisp"
            },
            owner: "john",
            data: [0x28, 0x71, 0x75, 0x69, 0x74, 0x29]
        }

        console.log('line 67', XDR)

        // console.log('line 69', testBytes)

        const customType = X(xCode)
        // console.log('line 72', customType)

        window.xdr = XDR
        window.x = X

        window.testValue = testValue

    </script>

</head>

<body>
    <header>
        <h1>SimpleXDR Demo Page</h1>
        <p>Using the <a href="https://github.com/cloudouble/simple-xdr">SimpleXDR</a> library</p>
    </header>
    <main>






    </main>
    <footer>
        <p>Created as the deliverable for Milestone Two of the <a
                href="https://github.com/Cloudouble/stellar-js-worker-sdk">Stellar JavaScript Worker SDK</a></p>
    </footer>

</body>

</html>